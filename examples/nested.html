<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <title>Nested Fields CDN example</title>

    <link type="text/css" rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vee-validate/3.4.14/vee-validate.full.min.js"
        integrity="sha512-d4p46b4aq5NIZyEvBMfEEQ68GpBbeaK4z7/9eRqVctwV4SNyVLEQKU8RsbbLZjuRjgiLYJN8H4YO6dPBEsSo7w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script type="text/javascript" src="/Users/aotter_phsu/experiments/aotterclam-ui-vue/lib/index.min.js"></script>
</head>

<body>
    <!-- Our application root element -->
    <div id="app">
        <div class="container">
            <div class="row mt-5">
                <div class="col col-md-8 col-xs-12">
                    <clam-form class="foo" v-model="formData" :fields="fields">
                    </clam-form>
                </div>
                <div class="col col-md-4 col-xs-12">
                    {{ formData }}
                </div>
            </div>
        </div>
    </div>


    <!-- install vee-validate dependency -->
    <script>

        // install all rules provided by vee-validate
        Object.keys(VeeValidate.Rules).forEach((rule) => {
            VeeValidate.extend(rule, VeeValidate.Rules[rule]);
        });

        // todo i18n

        // Register the component globally.
        Vue.component("ValidationObserver", VeeValidate.ValidationObserver);
        Vue.component('ValidationProvider', VeeValidate.ValidationProvider);
    </script>


    <!-- Start running your app -->
    <script>
        window.app = new Vue({
            el: '#app',
            components: {
                ClamForm: aotterclamui['ClamForm']
            },
            data: {
                formData: {}
            },
            computed: {
                fields() {
                    return [
                        {
                            name: 'gg',
                            label: 'gg',
                            contentType: 'Object',
                            fields: [
                                {
                                    name: "name",
                                    label: "姓名",
                                    contentType: 'string',
                                    component: "INPUT",
                                    description: "輸入姓名，最多 20 個字",
                                    placeholder: '王大明',
                                    rules: "required",
                                    inputTagAttrs: {
                                        maxlength: 20
                                    }
                                },
                                {
                                    name: "email",
                                    label: "Email",
                                    contentType: 'email',
                                    component: "INPUT",
                                    description: "輸入您的 Email",
                                    placeholder: 'john.doe@gmail.com',
                                    rules: "required|email",
                                    inputTagAttrs: {
                                        maxlength: 20
                                    }
                                },
                                {
                                    name: "qq",
                                    label: "qq",
                                    contentType: 'Object',
                                    fields: [
                                        {
                                            name: "name",
                                            label: "姓名",
                                            contentType: 'string',
                                            component: "INPUT",
                                            description: "輸入姓名，最多 20 個字",
                                            placeholder: '王大明',
                                            rules: "required",
                                            inputTagAttrs: {
                                                maxlength: 20
                                            }
                                        },
                                    ]
                                }
                            ]
                        },
                        {
                            name: "list",
                            label: "列表",
                            contentType: "Array",
                            getTitle(data) {
                                return data.name
                            },
                            getSummary(data) {
                                //return null
                                return data.name + '\n' + data.name
                            },
                            fields: [
                                {
                                    name: "name",
                                    label: "姓名",
                                    contentType: "string",
                                    formTagType: "INPUT",
                                    inputTagType: "text",
                                },
                                {
                                    name: "listn",
                                    label: "列表",
                                    contentType: "Array",
                                    getTitle(data) {
                                        return data.name + ' 巢狀'
                                    },
                                    fields: [
                                        {
                                            name: "name",
                                            label: "姓名",
                                            contentType: "string",
                                            formTagType: "INPUT",
                                            inputTagType: "text",
                                        },
                                    ]
                                },
                            ]
                        },
                    ]
                }
            }
        })
    </script>
</body>

</html>